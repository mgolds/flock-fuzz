{"ast":null,"code":"import SimpleBoid from './simpleBoid';\nexport const simpleFlockingSketch = p => {\n  let boids = [];\n  let params = {\n    separation: 1.5,\n    alignment: 1.0,\n    cohesion: 1.0,\n    newAgents: 5\n  };\n  let displaySettings = {\n    trailLength: 50,\n    trailThickness: 0.5,\n    trailType: 'line',\n    keepTrails: false,\n    colorMode: 'single',\n    agentShape: 'triangle',\n    agentSize: 1,\n    fadeAmount: 25,\n    colors: {\n      main: '#ffffff',\n      start: '#ff0000',\n      end: '#0000ff',\n      agent: '#ffffff',\n      background: '#000000'\n    }\n  };\n  let isDragging = false;\n  let lastMouseX = 0;\n  let lastMouseY = 0;\n  let addCooldown = 0;\n  let boidCounter = 0; // For assigning unique IDs to boids\n  let isPaused = false;\n\n  // External method to update parameters\n  p.updateParams = newParams => {\n    params = {\n      ...params,\n      ...newParams\n    };\n  };\n\n  // External method to update display settings\n  p.updateDisplaySettings = newSettings => {\n    displaySettings = {\n      ...displaySettings,\n      ...newSettings\n    };\n\n    // Update existing boids with new settings\n    for (const boid of boids) {\n      boid.updateSettings(displaySettings);\n    }\n  };\n\n  // External method to set paused state\n  p.setPaused = paused => {\n    isPaused = paused;\n  };\n  p.setup = () => {\n    const canvasWidth = window.innerWidth;\n    const canvasHeight = window.innerHeight;\n    const canvas = p.createCanvas(canvasWidth, canvasHeight, p.SVG);\n    canvas.addClass('flocking-svg');\n\n    // Initialize with some boids\n    for (let i = 0; i < 50; i++) {\n      boidCounter++;\n      boids.push(new SimpleBoid(p, p.random(p.width), p.random(p.height), displaySettings, boidCounter));\n    }\n  };\n  p.windowResized = () => {\n    const canvasWidth = window.innerWidth;\n    const canvasHeight = window.innerHeight;\n    p.resizeCanvas(canvasWidth, canvasHeight);\n  };\n  p.mousePressed = () => {\n    if (p.mouseX >= 0 && p.mouseX <= p.width && p.mouseY >= 0 && p.mouseY <= p.height) {\n      isDragging = true;\n      lastMouseX = p.mouseX;\n      lastMouseY = p.mouseY;\n\n      // Add boids on initial click\n      addBoidsAtPosition(p.mouseX, p.mouseY);\n    }\n  };\n  p.mouseReleased = () => {\n    isDragging = false;\n    addCooldown = 0;\n  };\n  p.mouseDragged = () => {\n    if (isDragging && p.mouseX >= 0 && p.mouseX <= p.width && p.mouseY >= 0 && p.mouseY <= p.height) {\n      // Add boids when dragging with a cooldown to control rate\n      if (addCooldown <= 0) {\n        addBoidsAtPosition(p.mouseX, p.mouseY);\n        addCooldown = 5; // Frames to wait before adding more boids\n      } else {\n        addCooldown--;\n      }\n      lastMouseX = p.mouseX;\n      lastMouseY = p.mouseY;\n    }\n  };\n  const addBoidsAtPosition = (x, y) => {\n    const count = params.newAgents || 5;\n    for (let i = 0; i < count; i++) {\n      boidCounter++;\n      const boid = new SimpleBoid(p, x + p.random(-10, 10), y + p.random(-10, 10), displaySettings, boidCounter);\n      boids.push(boid);\n    }\n  };\n  p.draw = () => {\n    // Get background color from settings\n    const bgColor = displaySettings.colors.background || '#000000';\n    const fadeAmount = displaySettings.fadeAmount || 25;\n\n    // Convert hex background color to RGB\n    const bg = hexToRgb(bgColor);\n\n    // Set a semi-transparent background to create a fading trail effect\n    p.background(bg.r, bg.g, bg.b, fadeAmount);\n\n    // If paused, don't update boid positions\n    if (!isPaused) {\n      for (let boid of boids) {\n        boid.flock(boids, params);\n        boid.update();\n        boid.edges();\n      }\n    }\n\n    // Always draw boids even when paused\n    for (let boid of boids) {\n      boid.show();\n    }\n\n    // Draw cursor trail when dragging\n    if (isDragging && p.mouseX >= 0 && p.mouseX <= p.width && p.mouseY >= 0 && p.mouseY <= p.height) {\n      p.stroke(100, 200, 255, 100);\n      p.strokeWeight(2);\n      p.line(lastMouseX, lastMouseY, p.mouseX, p.mouseY);\n    }\n  };\n\n  // Helper function to convert hex color to RGB\n  const hexToRgb = hex => {\n    // Default to black if no hex provided\n    if (!hex) return {\n      r: 0,\n      g: 0,\n      b: 0\n    };\n\n    // Remove # if present\n    hex = hex.replace('#', '');\n\n    // Convert hex to RGB\n    const r = parseInt(hex.substring(0, 2), 16);\n    const g = parseInt(hex.substring(2, 4), 16);\n    const b = parseInt(hex.substring(4, 6), 16);\n    return {\n      r,\n      g,\n      b\n    };\n  };\n};","map":{"version":3,"names":["SimpleBoid","simpleFlockingSketch","p","boids","params","separation","alignment","cohesion","newAgents","displaySettings","trailLength","trailThickness","trailType","keepTrails","colorMode","agentShape","agentSize","fadeAmount","colors","main","start","end","agent","background","isDragging","lastMouseX","lastMouseY","addCooldown","boidCounter","isPaused","updateParams","newParams","updateDisplaySettings","newSettings","boid","updateSettings","setPaused","paused","setup","canvasWidth","window","innerWidth","canvasHeight","innerHeight","canvas","createCanvas","SVG","addClass","i","push","random","width","height","windowResized","resizeCanvas","mousePressed","mouseX","mouseY","addBoidsAtPosition","mouseReleased","mouseDragged","x","y","count","draw","bgColor","bg","hexToRgb","r","g","b","flock","update","edges","show","stroke","strokeWeight","line","hex","replace","parseInt","substring"],"sources":["C:/Users/mttgo/OneDrive/Desktop/Cursor Projects/webapps/flocking-app/src/sketches/simpleFlockingSketch.js"],"sourcesContent":["import SimpleBoid from './simpleBoid';\r\n\r\nexport const simpleFlockingSketch = (p) => {\r\n  let boids = [];\r\n  let params = {\r\n    separation: 1.5,\r\n    alignment: 1.0,\r\n    cohesion: 1.0,\r\n    newAgents: 5\r\n  };\r\n  let displaySettings = {\r\n    trailLength: 50,\r\n    trailThickness: 0.5,\r\n    trailType: 'line',\r\n    keepTrails: false,\r\n    colorMode: 'single',\r\n    agentShape: 'triangle',\r\n    agentSize: 1,\r\n    fadeAmount: 25,\r\n    colors: {\r\n      main: '#ffffff',\r\n      start: '#ff0000',\r\n      end: '#0000ff',\r\n      agent: '#ffffff',\r\n      background: '#000000'\r\n    }\r\n  };\r\n  let isDragging = false;\r\n  let lastMouseX = 0;\r\n  let lastMouseY = 0;\r\n  let addCooldown = 0;\r\n  let boidCounter = 0; // For assigning unique IDs to boids\r\n  let isPaused = false;\r\n  \r\n  // External method to update parameters\r\n  p.updateParams = (newParams) => {\r\n    params = { ...params, ...newParams };\r\n  };\r\n  \r\n  // External method to update display settings\r\n  p.updateDisplaySettings = (newSettings) => {\r\n    displaySettings = { ...displaySettings, ...newSettings };\r\n    \r\n    // Update existing boids with new settings\r\n    for (const boid of boids) {\r\n      boid.updateSettings(displaySettings);\r\n    }\r\n  };\r\n  \r\n  // External method to set paused state\r\n  p.setPaused = (paused) => {\r\n    isPaused = paused;\r\n  };\r\n  \r\n  p.setup = () => {\r\n    const canvasWidth = window.innerWidth;\r\n    const canvasHeight = window.innerHeight;\r\n    const canvas = p.createCanvas(canvasWidth, canvasHeight, p.SVG);\r\n    canvas.addClass('flocking-svg');\r\n    \r\n    // Initialize with some boids\r\n    for (let i = 0; i < 50; i++) {\r\n      boidCounter++;\r\n      boids.push(new SimpleBoid(\r\n        p, \r\n        p.random(p.width), \r\n        p.random(p.height), \r\n        displaySettings,\r\n        boidCounter\r\n      ));\r\n    }\r\n  };\r\n  \r\n  p.windowResized = () => {\r\n    const canvasWidth = window.innerWidth;\r\n    const canvasHeight = window.innerHeight;\r\n    p.resizeCanvas(canvasWidth, canvasHeight);\r\n  };\r\n  \r\n  p.mousePressed = () => {\r\n    if (p.mouseX >= 0 && p.mouseX <= p.width && p.mouseY >= 0 && p.mouseY <= p.height) {\r\n      isDragging = true;\r\n      lastMouseX = p.mouseX;\r\n      lastMouseY = p.mouseY;\r\n      \r\n      // Add boids on initial click\r\n      addBoidsAtPosition(p.mouseX, p.mouseY);\r\n    }\r\n  };\r\n  \r\n  p.mouseReleased = () => {\r\n    isDragging = false;\r\n    addCooldown = 0;\r\n  };\r\n  \r\n  p.mouseDragged = () => {\r\n    if (isDragging && p.mouseX >= 0 && p.mouseX <= p.width && p.mouseY >= 0 && p.mouseY <= p.height) {\r\n      // Add boids when dragging with a cooldown to control rate\r\n      if (addCooldown <= 0) {\r\n        addBoidsAtPosition(p.mouseX, p.mouseY);\r\n        addCooldown = 5; // Frames to wait before adding more boids\r\n      } else {\r\n        addCooldown--;\r\n      }\r\n      lastMouseX = p.mouseX;\r\n      lastMouseY = p.mouseY;\r\n    }\r\n  };\r\n  \r\n  const addBoidsAtPosition = (x, y) => {\r\n    const count = params.newAgents || 5;\r\n    for (let i = 0; i < count; i++) {\r\n      boidCounter++;\r\n      const boid = new SimpleBoid(\r\n        p,\r\n        x + p.random(-10, 10),\r\n        y + p.random(-10, 10),\r\n        displaySettings,\r\n        boidCounter\r\n      );\r\n      boids.push(boid);\r\n    }\r\n  };\r\n  \r\n  p.draw = () => {\r\n    // Get background color from settings\r\n    const bgColor = displaySettings.colors.background || '#000000';\r\n    const fadeAmount = displaySettings.fadeAmount || 25;\r\n    \r\n    // Convert hex background color to RGB\r\n    const bg = hexToRgb(bgColor);\r\n    \r\n    // Set a semi-transparent background to create a fading trail effect\r\n    p.background(bg.r, bg.g, bg.b, fadeAmount);\r\n    \r\n    // If paused, don't update boid positions\r\n    if (!isPaused) {\r\n      for (let boid of boids) {\r\n        boid.flock(boids, params);\r\n        boid.update();\r\n        boid.edges();\r\n      }\r\n    }\r\n    \r\n    // Always draw boids even when paused\r\n    for (let boid of boids) {\r\n      boid.show();\r\n    }\r\n    \r\n    // Draw cursor trail when dragging\r\n    if (isDragging && p.mouseX >= 0 && p.mouseX <= p.width && p.mouseY >= 0 && p.mouseY <= p.height) {\r\n      p.stroke(100, 200, 255, 100);\r\n      p.strokeWeight(2);\r\n      p.line(lastMouseX, lastMouseY, p.mouseX, p.mouseY);\r\n    }\r\n  };\r\n  \r\n  // Helper function to convert hex color to RGB\r\n  const hexToRgb = (hex) => {\r\n    // Default to black if no hex provided\r\n    if (!hex) return { r: 0, g: 0, b: 0 };\r\n    \r\n    // Remove # if present\r\n    hex = hex.replace('#', '');\r\n    \r\n    // Convert hex to RGB\r\n    const r = parseInt(hex.substring(0, 2), 16);\r\n    const g = parseInt(hex.substring(2, 4), 16);\r\n    const b = parseInt(hex.substring(4, 6), 16);\r\n    \r\n    return { r, g, b };\r\n  };\r\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}