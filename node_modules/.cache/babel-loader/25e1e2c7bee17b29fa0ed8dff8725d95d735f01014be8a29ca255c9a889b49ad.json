{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mttgo\\\\OneDrive\\\\Desktop\\\\Cursor Projects\\\\webapps\\\\flocking-app\\\\src\\\\components\\\\Flocking.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport p5 from 'p5';\nimport { simpleFlockingSketch } from '../sketches/simpleFlockingSketch';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Flocking({\n  params,\n  displaySettings,\n  isPaused\n}) {\n  _s();\n  const canvasRef = useRef();\n  const p5Instance = useRef(null);\n  const sketchInitialized = useRef(false);\n  useEffect(() => {\n    // Only create the p5 instance once\n    if (!sketchInitialized.current) {\n      // Create new p5 instance with the simple sketch\n      p5Instance.current = new p5(simpleFlockingSketch, canvasRef.current);\n      sketchInitialized.current = true;\n    }\n\n    // Always update parameters when they change (including on initial mount)\n    if (p5Instance.current) {\n      p5Instance.current.updateParams(params);\n    }\n\n    // Handle window resizing\n    const handleResize = () => {\n      if (p5Instance.current) {\n        p5Instance.current.windowResized();\n      }\n    };\n    window.addEventListener('resize', handleResize);\n\n    // Cleanup function\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      if (p5Instance.current && !sketchInitialized.current) {\n        p5Instance.current.remove();\n        p5Instance.current = null;\n      }\n    };\n  }, [params]); // Include params in the dependency array\n\n  // Effect for display settings changes\n  useEffect(() => {\n    if (p5Instance.current && displaySettings) {\n      p5Instance.current.updateDisplaySettings(displaySettings);\n    }\n  }, [displaySettings]);\n\n  // Effect for pause state changes\n  useEffect(() => {\n    if (p5Instance.current) {\n      p5Instance.current.setPaused(isPaused);\n    }\n  }, [isPaused]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: canvasRef,\n    className: \"canvas-container\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 10\n  }, this);\n}\n_s(Flocking, \"5EWZh1HrU8SjiFVh4rybFDkk7eE=\");\n_c = Flocking;\nexport default Flocking;\nvar _c;\n$RefreshReg$(_c, \"Flocking\");","map":{"version":3,"names":["React","useEffect","useRef","p5","simpleFlockingSketch","jsxDEV","_jsxDEV","Flocking","params","displaySettings","isPaused","_s","canvasRef","p5Instance","sketchInitialized","current","updateParams","handleResize","windowResized","window","addEventListener","removeEventListener","remove","updateDisplaySettings","setPaused","ref","className","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/mttgo/OneDrive/Desktop/Cursor Projects/webapps/flocking-app/src/components/Flocking.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport p5 from 'p5';\r\nimport { simpleFlockingSketch } from '../sketches/simpleFlockingSketch';\r\n\r\nfunction Flocking({ params, displaySettings, isPaused }) {\r\n  const canvasRef = useRef();\r\n  const p5Instance = useRef(null);\r\n  const sketchInitialized = useRef(false);\r\n\r\n  useEffect(() => {\r\n    // Only create the p5 instance once\r\n    if (!sketchInitialized.current) {\r\n      // Create new p5 instance with the simple sketch\r\n      p5Instance.current = new p5(simpleFlockingSketch, canvasRef.current);\r\n      sketchInitialized.current = true;\r\n    }\r\n    \r\n    // Always update parameters when they change (including on initial mount)\r\n    if (p5Instance.current) {\r\n      p5Instance.current.updateParams(params);\r\n    }\r\n    \r\n    // Handle window resizing\r\n    const handleResize = () => {\r\n      if (p5Instance.current) {\r\n        p5Instance.current.windowResized();\r\n      }\r\n    };\r\n    \r\n    window.addEventListener('resize', handleResize);\r\n    \r\n    // Cleanup function\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n      if (p5Instance.current && !sketchInitialized.current) {\r\n        p5Instance.current.remove();\r\n        p5Instance.current = null;\r\n      }\r\n    };\r\n  }, [params]); // Include params in the dependency array\r\n  \r\n  // Effect for display settings changes\r\n  useEffect(() => {\r\n    if (p5Instance.current && displaySettings) {\r\n      p5Instance.current.updateDisplaySettings(displaySettings);\r\n    }\r\n  }, [displaySettings]);\r\n\r\n  // Effect for pause state changes\r\n  useEffect(() => {\r\n    if (p5Instance.current) {\r\n      p5Instance.current.setPaused(isPaused);\r\n    }\r\n  }, [isPaused]);\r\n\r\n  return <div ref={canvasRef} className=\"canvas-container\"></div>;\r\n}\r\n\r\nexport default Flocking; "],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAChD,OAAOC,EAAE,MAAM,IAAI;AACnB,SAASC,oBAAoB,QAAQ,kCAAkC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExE,SAASC,QAAQA,CAAC;EAAEC,MAAM;EAAEC,eAAe;EAAEC;AAAS,CAAC,EAAE;EAAAC,EAAA;EACvD,MAAMC,SAAS,GAAGV,MAAM,CAAC,CAAC;EAC1B,MAAMW,UAAU,GAAGX,MAAM,CAAC,IAAI,CAAC;EAC/B,MAAMY,iBAAiB,GAAGZ,MAAM,CAAC,KAAK,CAAC;EAEvCD,SAAS,CAAC,MAAM;IACd;IACA,IAAI,CAACa,iBAAiB,CAACC,OAAO,EAAE;MAC9B;MACAF,UAAU,CAACE,OAAO,GAAG,IAAIZ,EAAE,CAACC,oBAAoB,EAAEQ,SAAS,CAACG,OAAO,CAAC;MACpED,iBAAiB,CAACC,OAAO,GAAG,IAAI;IAClC;;IAEA;IACA,IAAIF,UAAU,CAACE,OAAO,EAAE;MACtBF,UAAU,CAACE,OAAO,CAACC,YAAY,CAACR,MAAM,CAAC;IACzC;;IAEA;IACA,MAAMS,YAAY,GAAGA,CAAA,KAAM;MACzB,IAAIJ,UAAU,CAACE,OAAO,EAAE;QACtBF,UAAU,CAACE,OAAO,CAACG,aAAa,CAAC,CAAC;MACpC;IACF,CAAC;IAEDC,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEH,YAAY,CAAC;;IAE/C;IACA,OAAO,MAAM;MACXE,MAAM,CAACE,mBAAmB,CAAC,QAAQ,EAAEJ,YAAY,CAAC;MAClD,IAAIJ,UAAU,CAACE,OAAO,IAAI,CAACD,iBAAiB,CAACC,OAAO,EAAE;QACpDF,UAAU,CAACE,OAAO,CAACO,MAAM,CAAC,CAAC;QAC3BT,UAAU,CAACE,OAAO,GAAG,IAAI;MAC3B;IACF,CAAC;EACH,CAAC,EAAE,CAACP,MAAM,CAAC,CAAC,CAAC,CAAC;;EAEd;EACAP,SAAS,CAAC,MAAM;IACd,IAAIY,UAAU,CAACE,OAAO,IAAIN,eAAe,EAAE;MACzCI,UAAU,CAACE,OAAO,CAACQ,qBAAqB,CAACd,eAAe,CAAC;IAC3D;EACF,CAAC,EAAE,CAACA,eAAe,CAAC,CAAC;;EAErB;EACAR,SAAS,CAAC,MAAM;IACd,IAAIY,UAAU,CAACE,OAAO,EAAE;MACtBF,UAAU,CAACE,OAAO,CAACS,SAAS,CAACd,QAAQ,CAAC;IACxC;EACF,CAAC,EAAE,CAACA,QAAQ,CAAC,CAAC;EAEd,oBAAOJ,OAAA;IAAKmB,GAAG,EAAEb,SAAU;IAACc,SAAS,EAAC;EAAkB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;AACjE;AAACnB,EAAA,CApDQJ,QAAQ;AAAAwB,EAAA,GAARxB,QAAQ;AAsDjB,eAAeA,QAAQ;AAAC,IAAAwB,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}